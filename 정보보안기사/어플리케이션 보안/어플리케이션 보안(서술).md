1. [DNS 스푸핑(DNS Spoofing)](#dns-스푸핑dns-spoofing)<br>
2. [DNS가 TCP 53번 포트를 이용하는 경우](#dns가-tcp-53번-포트를-이용하는-경우)<br>
3. [마스터 및 슬레이브 네임서버의 설정 내용](#마스터-및-슬레이브-네임서버의-설정-내용)<br>
4. [HTTP 쿠키](#http-쿠키)<br>
5. [웹 서버에서 쿠키 배포 시 사용할 수 있는 보안 옵션](#웹-서버에서-쿠키-배포-시-사용할-수-있는-보안-옵션)<br>
6. [HTTP GET 메소드](#http-get-메소드)<br>
7. [HTTP POST 메소드](#http-post-메소드)<br>
8. [FTP Bounce 공격](#ftp-bounce-공격)<br>
9. [Anonymous FTP 공격](#anonymous-ftp-공격)<br>
10. [TFTP(Trival FTP) 공격](#tftptrival-ftp-공격)<br>
11. [FTP Active Mode](#ftp-active-mode)<br>
12. [FTP Passive Mode](#ftp-passive-mode)<br>

# DNS 스푸핑(DNS Spoofing)

- 희생자가 DNS 질의를 수행하면 공격자가 이를 스니핑하고 있다가 희생자에게 조작된 DNS 응답을 보내, 가짜 사이트로 접속을 유도하는 공격기법이다.
- 중요한 사이트의 IP 주소에 대해서는, DNS 질의보다 우선순위가 높은 hosts 파일을 통해 관리한다.

# DNS가 TCP 53번 포트를 이용하는 경우

- 일반적으로, DNS 질의는 UDP 53번 포트를 통해 512바이트 이하의 패킷을 송수신한다.
- 단, 다음과 같은 경우는 TCP를 이용한다.

1. 존 전송(Zone Transfer) 시 53/tcp 포트를 사용한다.

- 마스터에 있는 원본 존 데이터를 슬레이브가 동기화/복사하는 작업을 존 전송이라고 한다.
- 존 전송은 일반적으로 많은 존 데이터를 이동해야 하므로 신뢰성 있는 전송을 보장하는 TCP를 이용한다.

2. 응답 데이터(DNS Answer)가 512 bytes를 초과할 때 53/tcp 포트를 사용한다.

- 클라이언트 질의에 대하여 네임서버 처리 결과 512 bytes를 초과하면 네임 서버는 신뢰성 있는 전송을 보장해 주기 위해 TCP로 재요청하도록 응답한다.
- 해당 응답을 받은 클라이언트는 53/tcp 포트로 재요청을 수행한다.

# 마스터 및 슬레이브 네임서버의 설정 내용

```
slave 1 네임서버 IP : 192.168.56.100
[Master 네임서버의 named.conf 설정 내용]
options{
  allow-transfer {192.168.56.100;};
};
[slave_1 네임서버의 named.conf 설정 내용]
options{
  allow-transfer(none;);
};
```

1. allow-transfer 설정을통해 제공하는 정보의 이름과 제공하는 정보의 내용

- 존(Zone) 정보를 제공한다.
- 존 정보란, 해당 DNS 서버가 위임받은(DNS 서버에 설정된) 도메인에 대한 리소스 레코드 정보(호스트 정보, 네임서버 및 메일서버 정보 등)를 말한다.

2. Master 네임서버 설정 파일(named.conf)의 설정 내용의 의미

- slave 1 네임서버에 대한 존 전송(zone transfer)을 허용한다.

3. slave_1 네임서버 설정 파일(named.conf)의 설정 내용의 의미

- 모든 네임서버에 대해 존 전송을 허용하지 않는다.

4. 2.3.번 설정이 어떤 공격이나 위협에 대응하기 위함안가?

- 존 전송을 제한하지 않으면 공격자의 지속적인 존 전송 요청을 통해 도스(DoS) 공격으로 악용되거나, 존 데이터에 저장된 해당 도메인의 호스트 정보, 시스템 정보 등이 불필요하게 노출될 수 있는 문제점이 있다.

# HTTP 쿠키

- 서버에서 쿠키를 생성하여 웹 브라우저에 전달할 때 사용하는 HTTP 응답 헤더의 이름

  - Set-Cookie

- 웹 브라우저가 쿠키를 서버로 전달할 때 사용하는 HTTP 요청 헤더의 이름

  - Cookie

- 쿠키 관련 보안 속성 중 httponly 속성을 설정할 때의 효과

  - 쿠키에 httponly 속성을 설정하면, 클라이언트(웹 브라우저 등)에서 스크립트(자바스크립트 등)을 통한 해당 쿠키 접근을 차단하기 때문에 쿠키 탈취를 위한 XSS 등의 공격에 효과적으로 대응할 수 있다.

- 쿠키 관련 보안 속성 중 secure 속성
  - 쿠키에 secure 속성을 설정하면, 클라이언트(웹 브라우저 등)에서 HTTPS(SSL/TLS) 통신일 경우에만 해당 쿠키를 전송하기 때문에 전송 중 평문 쿠키가 노출되는 것을 방지할 수 있다.

# 웹 서버에서 쿠키 배포 시 사용할 수 있는 보안 옵션

- Secure

  - 클라이언트(웹 브라우저 등)에서 HTTPS(암호화 통신) 통신일 경우에만 해당 쿠키를 전송하고, HTTP 통신(평문 통신)일 경우에는 전송하지 않는다.
  - 쿠키 정보의 기밀성을 보장할 수 있다.

- HttpOnly

  - 클라이언트에서 스크립트를 통한 쿠키 접근을 차단하도록 설정하는 옵션이다.
  - 악의적인 쿠키 정보 탈취를 방지할 수 있다.
  - XSS 공격을 통해 쿠키 정보를 탈취하는 형태의 공격에 대응 가능하다.

- Expires
  - 쿠키의 유효기간을 설정하는 옵션이다.
  - 유효기간을 최소한으로 설정하여, 쿠키 정보가 클라이언트의 하드디스크 등에 지속해서 남아 공격자에게 노출되는 위험을 방지할 수 있다.

# HTTP GET 메소드

- HTTP 요청 URL의 끝에 데이터를 추가해서 전달하는 방식이다.
- 즉, URL을 이용하여 서버에 자원을 요청한다.
- GET 메소드는 요청 URL 끝에 데이터를 추가해서 전달하기에, 요청 URL 정보를 남기는 클라이언트 히스토리나 서버 액세스 로그에 데이터가 그대로 노출되어 중요정보일 경우 보안상 매우 취약하다.

# HTTP POST 메소드

- HTTP 요청 메시지의 바디부에 데이터를 담아서 전달하는 방식이다.
- POST 메소드는 요청 메시지 바디부에 데이터를 담아서 전달하기에, 클라이언트 히스토리나 서버의 access 로그에 데이터가 남지 않으므로 GET 방식에 비해 안전한다.

# FTP Bounce 공격

- 제어 체널(Control Channel)과 데이터 체널(Data Channel)을 다르게 사용하고, 데이터체널을 생성할 때 목적지를 확인하지 않는 FTP 설계의 구조적 취약점을 이용하는 공격이다.
- 주로 익명 FTP 서버를 이용한다.
- PORT 명령을 조작하여, 공격 대상 네트워크를 스캔하고 FTP 서버를 통해 공격자가 원하는 곳으로 데이터를 전송하게 한다.

# Anonymous FTP 공격

- 익명 FTP 서비스는 익명 계정(anonymous)으로 FTP 접속이 가능한 서비스를 말한다.
- 익명 계정을 허용하면 원격에서 인증 없이 누구나 서버의 파일에 접근할 수 있으므로, 보안상 심각한 문제가 발생할 수 있다.
- 만일, 익명사용자 에게 쓰기 권한까지 있다면, 악성코드를 업로드하여 다수의 사용자에게 피해를 발생시킬 수 있다.

# TFTP(Trival FTP) 공격

- TFTP는 간단하고 단순한 파일 송수신 프로토콜이다.
- 자체 디스크가 없는 워크스테이션에 부팅이미지를 전달할 목적으로 주로 사용한다.
- TFTP는 별도의 인증과정 없이 지정된 디렉터리에 접근할 수 있는 보안상 취약점이 존재한다.

# FTP Active Mode

- 능동 모드로 데이터를 전송하기 위해선 FTP 서버(20/TCP 포트)에서 PC(1024/TCP 이상 포트)로 연결되어야 한다.
- 능동 모드로 데이터 채널을 연결하기 위해선 PC 방화벽에 FTP 서버(20/TCP 포트)에서 PC의 연결요청을 허용해야 한다.
- `클라이언트에서 FTP 서버로 접속하여 제어 체널을 생성하고 FTP 서버에서 클라이언트로 접속하여 데이터채널을 생성한다.`
  - 접속 포트(제어 채널)
    - 클라이언트(1024/TCP 이상 포트) -> 서버(21/TCP 포트)
- 능동 모드에서 데이터 목록을 받기 위한 데이터 채널을 형성하기 위해선 FTP 서버(20/TCP 포트)에서 클라이언트(1024/TCP 이상 포트)로 연결해야 하는데, 방화벽에서 1024/TCP 이상 포트로 연결요청을 허용하지 않으면, 데이터 채널 연결이 불가능하여 데이터 목록을 가져오지 못하는 문제가 발생한다.

# FTP Passive Mode

- 수동 모드로 데이터를 전송하려면, 데이터 체널이 PC(1024/TCP)에서 FTP 서버(1024/TCP 이상 포트)로 연결된다.
