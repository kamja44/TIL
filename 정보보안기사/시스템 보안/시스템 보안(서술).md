# utmp와 wtmp 차이점

1. utmp는 현재 로그인한 사용자 정보를 가지고 있고 wtmp는 지금까지 로그인한 사용자의 로그인/로그아웃 히스토리 정보를 갖고 있다.
2. wtmp는 시스템 부팅(booting) 히스토리 정보를 갖고 있다.
3. wtmp는 시스템 셧다운(shutdown) 히스토리 정보를 갖고 있다.

# chown

- chown [소유자] [파일명]
- 해당 파일 소유자를 변경한다. 단, root만 실행할 수 있다.

# chgrp

- chgrp [소유그룹] [파일명]
- 해당 파일에 대한 소유그룹을 변경한다. 단, root만 실행할 수 있다.

# MAC Time

- 리눅스 시스템의 파일시스템의 타임라인에서 제공하는 시간 속성들이다.

1. mtimt(last Modify Time)

- 파일의 내용이 마지막으로 수정된 시간

2. atime(last Access Time)

- 파일에 마지막으로 접근한 시간

3. ctime(last Change Time)

- 파일의 속성 정보(소유자, 접근 권한 등)가 마지막으로 변경된 시간

# PAM(Pluggable Authentication Module) 모듈 설정의 의미

```
#cat /etc/pam.d/system-auth
auth required /lib/security/pam_tally.so deny=5 unlock_time=120 no_magic_root
account required /lib/security/pam_tally.so no_magic_root reset
```

deny=5

- 5회 입력 실패 시 패스워드 잠금
  unlock_time = 120
- 계정이 잠김 후 마지막 계정 실패 시간으로부터 120초가 지나면 계정 잠금 해제
  no_magic_root
- root 계정은 패스워드 잠금 설정을 적용하지 않는다.
  reset
- 접속 시도 성공 시 실패 횟수 초기화

# 버퍼 오버플로우 예방책

1. 스택가드

- 메모리상에서 `프로그램의 복귀주소와 변수 사이에 특정 값을 저장해 두었다가 그 값이 변경되었을 경우 오버플로우로 가정`하여 프로그램의 실행을 중단한다.
- `카나리 단어 기법`이라고도 한다.

2. 스택쉴드

- 함수 시작 시 `리턴 주소를 Global RET라는 특수 스택에 저장해 두었다가 함수 종료 시 저장된 값과 스택의 RET 값을 비교하여 다를 경우 프로그램을 종료`한다.

3. ASLR(Address Space Layout Randomization)

- 메모리 공격을 방어하기 위해 주소 공간 배치를 난수화하는 기법이다.
- 실행 시마다 메모리 주소를 변경시켜 악성코드에 의한 특정주소 호출을 방지한다.

```
echo 2> /proc/sys/kernel/randomize_va_space
```

- 리눅스 커널에서 ASLR을 설정하는 코드이다.
  - randomize_va_space 커널 파라미터를 0으로 설정하면, 사용하지 않는다는 의미이고, 1로 설정하면 힙 이외는 모두 랜덤하게 설정한다는 의미이고, 2로 설정하면 모두 랜덤하게 설정한다는 의미이다.

4. 입력값 검증 or 버퍼 오버플로우에 취약하지 않은 함수 사용

- 프로그램 개발 시 버퍼 오버플로우에 취약하지 않은 함수를 사용하거나 입력값에 대한 적절한 크기 검증을 통해 오버플로우가 발생하지 않도록 한다.
