1. [시스템 보안](#1-시스템-보안)<br>
   &nbsp;&nbsp; 1-1. [윈도우 서버의 계정 관리 방식](#윈도우-서버의-계정-관리-방식)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-1-1. [윈도우의 로컬 사용자 계정](#윈도우의-로컬-사용자-계정)<br>
   &nbsp;&nbsp; 1-2. [이벤트 뷰어](#이벤트-뷰어event-viewer)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-2-1. [윈도우 버전에 따른 로그 파일명](#윈도우-버전에-따른-로그-파일명)<br>
   &nbsp;&nbsp; 1-3. [감사 정책](#감사-정책)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-3-1. [세부 감사 정책](#세부-감사-정책)<br>
   &nbsp;&nbsp; 1-4. [사전 대입 공격](#사전-공격dictionary-attack)<br>
   &nbsp;&nbsp; 1-5. [무차별 대입 공격](#무차별-공격brute-force-attack)<br>
   &nbsp;&nbsp; 1-6. [혼합공격](#혼합-공격hybrid-attact)<br>
   &nbsp;&nbsp; 1-7. [Pass the Hash 공격](#pass-the-hash-공격)<br>
   &nbsp;&nbsp; 1-8. [크리덴셜 스터핑](#크리덴셜-스터핑credential-stuffing)<br>
   &nbsp;&nbsp; 1-9. [운영체제 보안을 위한 분리](#운영체제-보안을-위한-분리)<br>
   &nbsp;&nbsp; 1-10. [참조 모니터](#참조-모니터reference-monitor)<br>
   &nbsp;&nbsp; 1-11. [인터럽트](#인터럽트interrupt)<br>
   &nbsp;&nbsp; 1-12. [커널](#프로그램-카운터pc)<br>
   &nbsp;&nbsp; 1-13. [커널](#커널kernel)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-13-1. [커널의 기능](#커널의-기능)<br>
   &nbsp;&nbsp; 1-14. [쉘(shell)](#쉘shell)<br>
   &nbsp;&nbsp; 1-15. [유닉스 시스템의 세 가지 핵심 컴포넌트](#유닉스-시스템의-세-가지-핵심-컴포넌트)<br>
   &nbsp;&nbsp; 1-16. [컴파일(Compile)](#컴파일compile)<br>
   &nbsp;&nbsp; 1-17. [init프로세스](#init-프로세스)<br>
   &nbsp;&nbsp; 1-18. [문맥 교환](#문맥-교환context-switching)<br>
   &nbsp;&nbsp; 1-19. [프로세스 제어 블록](#프로세스-제어-블록pcb)<br>
   &nbsp;&nbsp; 1-20. [프로세스 상태](#프로세스-상태)<br>
   &nbsp;&nbsp; 1-21. [상호배제](#상호배제mutual-exclusion)<br>
   &nbsp;&nbsp; 1-22. [교착상태](#교착상태deadlock)<br>
   &nbsp;&nbsp; 1-23. [리눅스 top 명령어](#리눅스-top-명령어)<br>
   &nbsp;&nbsp; 1-24. [리눅스 pstree 명렁어](#리눅스-pstree-명령어)<br>
   &nbsp;&nbsp; 1-25. [프로세스 우선권 순위 설정 명령](#프로세스-우선권-순위-설정-명령)<br>
   &nbsp;&nbsp; 1-26. [스왑 공간](#스왑-공간swap-space)<br>
   &nbsp;&nbsp; 1-27. [LRU](#lruleast-recently-used)<br>
   &nbsp;&nbsp; 1-28. [LFU](#lfuleastfrequently-used)<br>
   &nbsp;&nbsp; 1-29. [NUR](#nurnot-used-recently)<br>
   &nbsp;&nbsp; 1-30. [FIFO](#fifofirst-in-first-out)<br>
   &nbsp;&nbsp; 1-31. [유닉스 파일시스템 구성](#유닉스-파일시스템-구성)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-31-1. [부트 블록](#부트-블록boot-block)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-31-2. [슈퍼 블록](#슈퍼-블록super-block)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-31-3. [아이노드](#아이노드inode)<br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1-31-3-1. [아이노드가 가지고 있는 속성정보](#아이노드가-가지고-있는-속성정보)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-31-4. [데이터 블록](#데이터-블록data-blocks)<br>
   &nbsp;&nbsp; 1-32. [UNIX/Linux 시스템의 디렉터리 구조](#unixlinux-시스템의-디렉터리-구조)<br>
   &nbsp;&nbsp; 1-33. [저널링](#저널링)<br>
   &nbsp;&nbsp; 1-34. [버퍼 오버플로우](#버퍼-오버플로우buffer-overflow)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-33-1. [스택 버퍼 오버플로우](#스택-버퍼-오버플로우stack-buffer-overflow)<br>
   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1-33-1-1. [스택 버퍼 오버플로우 대책](#스택-버퍼-오버플로우-대책)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-33-2. [힙 버퍼 오버플로우](#힙-버퍼-오버플로우heap-buffer-overflow)<br>
   &nbsp;&nbsp; 1-34. [ASLR](#aslraddress-space-layout-randomization)<br>
   &nbsp;&nbsp; 1-35. [레이스 컨디션](#레이스-컨디션race-condition)<br>
   &nbsp;&nbsp; 1-36. [포맷 스트링](#포맷-스트링-공격format-string-attack)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-36-1. [포맷 스트링 취약점의 보안 위협](#포맷-스트링-취약점의-보안-위협-3가지)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-36-2. [보안상 취약한 스트링 관련 취약한 함수](#보안상-취약한-스트링-관련-취약한-함수)<br>
   &nbsp;&nbsp; 1-37. [유닉스 링크 명령어](#유닉스-링크-명령어)<br>
   &nbsp;&nbsp; 1-38. [유닉스 패스워드 파일](#유닉스에서-패스워드-파일)<br>
   &nbsp;&nbsp; 1-39. [shadow 파일에 저장되는 암호화된 패스워드 필드의 의미](#shadow-파일에-저장되는-암호화된-패스워드-필드의-의미)<br>
   &nbsp;&nbsp; 1-40. [shadow 파일](#shadow-파일)<br>
   &nbsp;&nbsp; 1-41. [salt](#salt)<br>
   &nbsp;&nbsp; 1-42. [chmod 명령어](#chmod-명령)<br>
   &nbsp;&nbsp; 1-43. [umask 명령어](#umask-명령어)<br>
   &nbsp;&nbsp; 1-44. [특수권한 설정 방법(SUID, SGID, Sticky bit)](#특수권한-설정-방법suid-sgid-sticky-bit)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-44-1. [특수권한 파일 검색 방법](#특수권한-파일-검색-방법)<br>
   &nbsp;&nbsp; 1-45. [chown 명령어](#chown-명령어)<br>
   &nbsp;&nbsp; 1-46. [chgrp 명령어](#chgrp-명령어)<br>
   &nbsp;&nbsp; 1-47. [PAM(Pluggable Authentication Module)](#pampluggable-authentication-module)<br>
   &nbsp;&nbsp; 1-48. [/etc/inetd.conf 파일](#etcinetdconf-파일)<br>
   &nbsp;&nbsp; 1-49. [/etc/services 파일](#etcservices-파일)<br>
   &nbsp;&nbsp; 1-50. [/etc/protocols 파일](#etcprotocols-파일)<br>
   &nbsp;&nbsp; 1-51. [TCP Wrapper](#tcp-wrapper)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-51-1. [hosts.allow](#hostsallow-파일)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-51-2. [hosts.deny](#hostsdeny-파일)<br>
   &nbsp;&nbsp;&nbsp;&nbsp; 1-51-3. [TCP Wrapper 사용 전 후의 설정 파일 변경점](#tcp-wrapper를-사용하기-전과-후의-etcinetdconf-설정)<br>
   &nbsp;&nbsp; 1-52. [iptables](#iptables)<br>
   &nbsp;&nbsp; 1-53. [utmp 로그 파일](#utmp-로그-파일)<br>
   &nbsp;&nbsp; 1-54. [wtmp 로그 파일](#wtmp-로그-파일)<br>
   &nbsp;&nbsp; 1-55. [acct/pacct 로그 파일](#acctpacct)<br>
   &nbsp;&nbsp; 1-56. [lastlog 로그 파일](#lastlog-로그-파일)<br>
   &nbsp;&nbsp; 1-57. [Unix 관련 로그 파일](#unixsunos-관련-로그-파일)<br>
   &nbsp;&nbsp; 1-58. [Linux 관련 로그 파일](#linux-관련-로그-파일)<br>
   &nbsp;&nbsp; 1-59. [cat /etc/passwd](#cat-etcpasswd)<br>
   &nbsp;&nbsp; 1-60. [/var/adm/loginlog](#varadmloginlog)<br>
   &nbsp;&nbsp; 1-61. [/var/log/btmp](#varlogbtmp)<br>
   &nbsp;&nbsp; 1-62. [xferlog](#xferlog)<br>
   &nbsp;&nbsp; 1-63. [syslogd](#syslogd)<br>
   &nbsp;&nbsp; 1-64. [syslog.conf 설정 형식](#syslogconf-설정-형식)<br>
   &nbsp;&nbsp; 1-65. [syslog.conf 로그 수준 유형](#syslogconf-로그-수준-유형)<br>
   &nbsp;&nbsp; 1-66. [Beep](#beep)<br>
   &nbsp;&nbsp; 1-67. [syslog 프로토콜](#syslog-프로토콜)<br>
   &nbsp;&nbsp; 1-68. [logrotate](#logrotate)<br>
   &nbsp;&nbsp; 1-69. [logrotate의 옵션](#logrotate의-옵션)<br>
   &nbsp;&nbsp; 1-70. [crontab](#crontab)<br>
   &nbsp;&nbsp; 1-71. [root 계정에 대한 원격 접속 제한 설정](#os별-root-계정에-대한-원격-접속-제한-설정-방법)<br>

# 1. 시스템 보안

## 윈도우 서버의 계정 관리 방식

1. 워크 그룹 방식

- 각각의 계정과 자원을 시스템별로 관리하는 방식 -> 소규모 네트워크에 적합
- "피어 투 피어"라고도 하며, `전용 서버 없이 모든 시스템이 서버이면서 클라이언트 기능을 가지며 서로 동등하다.`
- 서버 관리자가 필요 없으며, 보안 관련 정보는 각 시스템의 로컬 디렉터리 DB에 의해 제공된다.
- Active Directory가 구축되지 않은 상태로서 다른 시스템에 접근할 때 수시로 엑세스에 필요한 사용자 계정과 암호를 요구한다.

2. 도메인 방식

- 모든 계정과 자원을 특정 서버에서 관리하는 `중앙 집중식 방식`이다.
- 사용자에게 적절한 사용 권한을 설정하면 사용자는 다른 컴퓨터에 자원을 지정한 권한대로 접근할 수 있다.
- Active Directory가 구축된 상태에서 가능하며 기존의 Windows NT 기반의 도메인보다 확장된 기능을 제공한다.

### 윈도우의 로컬 사용자 계정

- 로컬 사용자 계정은 `%SystemRoot%\System32\config\SAM`에 저장되어 있다.

## 이벤트 뷰어(Event Viewer)

- `윈도우 OS에서 로그를 조회하고 관리`하는 도구이다.
- application 로그, security 로그, system 로그 3가지 로그를 기본 로그로 한다.

### 윈도우 버전에 따른 로그 파일명

- 윈도우 XP 이하
  - application 로그 : %SystemRoot%\System32\Config\AppEvent.Evt
  - system 로그 : %SystemRoot%\System32\Config\SysEvent.Evt
  - security 로그 : %SystemRoot%\System32\Config\SecEvent.Evt
- 윈도우 Vista 이상
  - application 로그 : %SystemRoot%\System32\winevt\Logs\application.evtx
  - system 로그 : %SystemRoot%\System32\winevt\Logs\system.evtx
  - security 로그 : %SystemRoot%\System32\winevt\Logs\security.evtx

## 감사 정책

- 윈도우 로그 관리와 관련하여 `서버 관리자가 가장 먼저 고려해야 할 대상`
- `어떤 로그를 남길지 정의한 규칙`
  - 감사 정책에 의해 지정한 이벤트 범주에 대해서만 로그가 남는다.
- 감사 정책이 구성되어 있지 않거나 설정 수준이 너무 낮으면 보안 관련 문제 발생 시 원인 파악이 어렵고, 설정 수준이 너무 높으면 불필요한 항목이 많아져 중요한 항복과 혼동될 수 있기에, 적절한 감사 정책 설정이 필요하다.
- 감사 정책 설정 방법
  - 윈도우 실행 -> secpol.msc(로컬 보안 정책)
- 로그 확인
  - 윈도우 실행 -> eventvwr.msc(이벤트 뷰어)

### 세부 감사 정책

|       감사 항목        |   권장값   |                                                                                    설명                                                                                     |
| :--------------------: | :--------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      객체 액세스       | 감사 안함  |                                               파일, 디렉터리, 레지스트리 등 객체에 대한 접근 성공/실패 여부를 기록할지를 결정                                               |
|       계정 관리        |    실패    |               계정 관리 이벤트를 감사할지 여부를 결정한다.<br>사용자 계정 또는 그룹의 생성, 삭제, 암호의 설정 및 변경 등의 이벤트 성공/실패 로그를 기록한다.                |
|   계정 로그온 이벤트   | 성공, 실패 |                                                 도메인 계정에 대한 로그온 성공/실패 관련 이벤트 로그를 기록할지를 결정한다.                                                 |
|       권한 사용        |    실패    |                                                           사용자의 권한을 이용하려고 할 때마다 이벤트를 생성한다.                                                           |
| 디렉터리 서비스 엑세스 |    실패    |                         Active Directory 개체의 시스템 엑세스 컨트롤 목록(SACL)에 나열된 사용자가 해당 개체에 액세스를 시도할 때 이벤트를 생성한다.                         |
|     로그온 이벤트      | 성공, 실패 |                                                로컬 계정에 대한 로그온/오프 성공/실패에 대한 이벤트의 기록 여부를 결정한다.                                                 |
|     시스템 이벤트      | 감사 안함  |                                             시스템 시작, 종료, 보안 로그에 영향을 미치는 이벤트 등을 감시할지 여부를 결정한다.                                              |
|       정책 변경        | 성공, 실패 |                                                                  감사 정책 변경의 성공 및 실패를 감사한다.                                                                  |
|     프로세스 추적      | 감사 안함  | 실행되는 프로세스에 대한 자세한 추적 정보를 감사하는 경우 프로세스 생성, 프로세스 종료, 핸들 복제 및 간접 개체 액세스 같은 프로세스 관련 이벤트르 감사할지 여부를 결정한다. |

### 윈도우 시스템의 이벤트 로그

1. application 로그

- 응용 프로그램이 남기는 다양한 이벤트가 저장된다.
- 어떤 로그를 남길지는 해당 응용 프로그램을 개발한 개발사에 의해 결정된다.

2. security 로그

- 로그온 시도 및 로그온 성공 및 실패, 사용자 계정의 추가 및 삭제, 권한 변경 등의 시스템 보안 관련 이벤트가 저장된다.
- `어떤 로그를 남길지는 감사 로그 설정`에 의해 결정된다.

3. system 로그

- 운영체제가 시작될 때 장치 드라이버가 로드되지 않는 여부, 시스템 서비스의 시작, 오류 등의 이벤트를 저장한다.

## 사전 대입 공격(Dictionary Attack)

- `비밀번호로 자주 사용되는 단어를 사전 파일로 만들어놓고 사전 파일의 단어를 대입하여 일치 여부를 확인`하는 방법이다.

## 무차별 대입 공격(Brute Force Attack)

- 비밀번호로 사용될 수 있는 영문자, 숫자, 특수문자 등을 `무작위로 대입`하여 비밀번호를 알아내는 방법이다.

## 혼합 공격(Hybrid Attact)

- 사전 공격과 무차별 공격을 혼합한 방식이다.
- 기존 사전 파일 문자열에 문자, 숫자 등을 추가 대입하여 비밀번호를 알아내는 방법이다.

## Pass the Hash 공격

- 패스워드에 대한 해시값을 인증 시에 사용하는 환경에서 `희생자의 해사값을 획득한 후 이를 이용하여 인증`을 시도하는 형태의 공격이다.
- 원격 서비스에 접속할 때 사용자의 실제 패스워드를 모르는 상태에서 탈취한 사용자의 패스워드 해시값을 이용하여 인증을 시도한다.

## 크리덴셜 스터핑(Credential Stuffing)

- 무작위 대입 공격의 일종이다.
- 신원확인에 필요한 개인정보(자격증명, Credential)를 다양한 방식으로 탈취하여 사용자가 이용할 만한 시스템 및 사이트에 방문한 후 무작위로 대입하는 공격을 말한다.

## 운영체제 보안을 위한 분리

- 물리적 분리(Physical separation)
  - 사용자별로 별도의 장비만 사용하도록 제한하는 방법으로 강한 형태의 분리가 되지만 현실적/실용적이지 못하다.
- 시간적 분리(Temporal separation)
  - 프로세스가 동일 시간에 하나씩만 실행하도록 하는 방법으로 동시 실행으로 발생되는 보안 문제를 제거한다.
- 논리적 분리(Logical separation)
  - 프로세스별 논리적인 영역을 갖도록 하는 방법이다.
  - 프로세스는 자신의 영역 안에서는 자유로운 작업을 수행하지만 할당된 영역 밖에서는 작업이 엄격하게 제한된다.
- 암호적 분리(Cryptographic separation)
  - 내부에서 사용되는 정보를 외부에서는 알 수 없도록 암호화하는 방법이다.

## 참조 모니터(reference monitor)

- 객체에 접근하는 주체의 각 요청을 점검하여 `보안 정책에 따라 접근통제`를 수행하는 추상 머신이다.
- `보안 커널에서 사용자의 접근권한을 검사하고 프로세스와 파일의 정보 흐름을 감시`하는 핵심 모듈이다.

## 인터럽트(interrupt)

- 컴퓨터 시스템에 예기치 않은 일이 발생했을 때 CPU에게 알린다.
  - 실행되는 프로그램에 의해서가 아닌 그 밖의 다른 것에 의해 발생되는 제어 흐름의 변경을 말한다.
- `인터럽트가 발생하면 현재 실행하고 있는 프로그램이 일시 중단되고, 그 특수한 상태를 처리하는 프로그램으로 옮겨져 처리한 후 다시 원래의 프로그램을 처리`한다.
- `CPU가 인터럽트 신호를 받으면 프로그램 카운터(PC)에 있는 복귀주소를 메모리 스택에 저장한 후 입출력 전송을 위한 인터럽트 서비스 루틴으로 제어를 이동`한다.

## 프로그램 카운터(PC)

- 다음에 수행할 명령어의 주소를 기억한다.

## 커널(Kernel)

- 하드웨어 특서으로부터 프로그램들을 격리하고, `하드웨어와 직접 상호 작동함으로써 프로그램들에 일관된 서비스를 제공한다.`

### 커널의 기능

- `프로세스와 파일의 관리`
- 하드웨어나 유틸리티 또는 응용 프로그램들은 정의된 시스템호출을 통해서 커널과 통신한다.
- 커널은 UNIX 계열의 시스템이 `부팅될 때 가장 먼저 로드`되는 운영체제의 핵심 부분이다.
- 주기억장치에 상주하여 프로세스 스케줄링, 기억 장치 관리, 파일시스템관리, 운영체제의 고유 기능을 제공한다.

## 쉘(shell)

- `사용자와 커널이 대화하는 인터페이스의 기능을 제공한다.`
- `커널과 직접적으로 연결`되어 있으며 `명령어를 해석한 결과`를 다른 프로그램으로 넘겨주기도 하고, 커널로 보내기도 한다.

## 유닉스 시스템의 세 가지 핵심 컴포넌트

|          구분           |                                                 설명                                                 |
| :---------------------: | :--------------------------------------------------------------------------------------------------: |
|      커널(kernel)       |            유닉스 운영체제의 핵심이다. <br>메인 메모리에 상주하여 컴퓨터 자원을 관리한다.            |
|        쉘(shell)        | 커널과 사용자 간의 인터페이스를 담당한다.<br>사용자 명령의 입출력을 수행하며, 프로그램을 실행시킨다. |
| 파일시스템(File System) |                   디렉터리, 서브 디렉터리, 파일 등의 계층적인 트리구조를 제공한다.                   |

## 컴파일(Compile)

- 사용자가 작성한 소스 프로그램을 컴퓨터가 이해할 수 있는 기계어로 번역하는 과정이다.
  - 과정이 종료되면 기계어 코드로 변환된 목적 프로그램이 생성된다.
- 원시 언어로 된 프로그램으로부터 그와 동등한 일을 하는 목적 언어로 된 프로그램을 생성하는 작업이다.
  - 프리 프로세싱, 매크로 처리, 어셈블 등 `모든 종류의 언어 처리 작업을 총칭`한다.

## init 프로세스

- `시스템 부팅과정의 마지막에 수행`되어 /etc/inittab 파일을 읽어 시스템의 `런 레벨(Run Level)에 따른 초기화 작업`을 수행한다.
- `고아 프로세스를 위한 대리모 역할`을 한다.
  - 고아 프로세스의 ppid가 1(init process)로 지정되면 고아 프로세스 종료 시 종료 상태정보를 init 프로세스에 반환하고 소멸한다.

## 문맥 교환(Context Switching)

- `하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하기 위하여 이전의 프로세스 상태(문맥)을 교환하고 새로운 프로세스의 상태를 적재하는 작업`이다.
- `하나의 프로세스의 문맥은 그 프로세스의 프로세스 제어 블록(PCB: Process Control Block)에 기록`한다.

## 프로세스 제어 블록(PCB)

- PCB는 OS가 `프로세스를 관리하는데 필요한 모든 정보를 유지하는 자료구조 테이블`이다.
- `프로세스가 생성할 때 만들어지며, 모든 프로세스는 각각 고유한 PCB를 가진다.`
- 운영체제가 `CPU를 다른 프로세스에 넘겨주고자 할 때, 프로세스에 관한 모든 정보를 PCB에 저장시키고 나서 다시 실행하고자 할 때 PCB에 보관된 정보를 재사용`한다.
- `수행이 완료된 프로세스는 해당 PCB도 함께 삭제`된다.
  - `PCB의 내용은 프로세스의 상태 변화가 일어났을 때 프로세스 관리자가 그 내용을 변경`한다.

## 프로세스 상태

- 준비 상태(Ready)
  - 프로세스가 CPU를 할당받기 위해 준비큐에서 대기하는 상태이다.
- 실행 상태(Running)
  - 프로세스가 CPU를 할당받고 실행 중인 상태
- 대기 상태(Blocking)
  - 실행 중인 프로세스가 시스템 호출로 인해 CPU 자원을 반납하고 작업이 완료될 때까지 대기하는 상태이다.
- 종료 상태(Terminated)
  - 작업이 끝난 프로세스는 시스템에서 제거되고 그 프로세스와 관련된 PCB도 삭제된다.

## 상호배제(Mutual Exclusion)

- `둘 이상의 프로세스 또는 스레드가 동일한 자원에 동시에 접근하는 것을 차단하기 위한 동기화 기법이다.`
  - 즉, 자원의 접근 순서를 제어하는 기법이다.
- 프로세스가 특정 자원을 사용하려고 할 때 락(Lock)을 획득한 후 사용하고, 하용이 끝나면 락(Lock)을 해제하고 다른 프로세스가 사요할 수 있도록 하는 방식이다.
- 접근 순서에 따라 서로 락이 걸린 자원을 무한정 기다리는 교착상태(Deadlock)가 발생할 수 있다.

## 교착상태(DeadLock)

- `동일한 자원을 공유하고 있는 두 개의 컴퓨터 프로그램들이 상대방의 자원에 접근하는 것을 방해함으로써, 두 프로그램 모두 기능이 중지`되는 상황이다.

## 리눅스 top 명령어

- 시스템의 전체적인 운영상황을 모니터링할 수 있는 명령어이다.
- CPU 정보뿐만 아니라 몰리적인 메모리, 스왑, 개별 프로세스 정보 등 시스템 자원의 다양한 정보를 실시간으로 모니터링 할 수 있다.

## 리눅스 pstree 명령어

- 시스템의 모든 프로세스를 트리구조로 확인할 수 있는 명령어이다.

## 프로세스 우선권 순위 설정 명령

- 우선권 순위는 -20 ~ 19까지 설정하며 작을수록 우선권이 높다.
- nice 명령어
  - 프로세스의 우선권 순위를 설정하여 실행하는 명령어이다.
- renice 명령어
  - 현재 실행 중인 프로세스의 우선권 순위를 변경하는 명령어이다.

## 스왑 공간(Swap space)

- 디스크(보조기억장치)의 일정 영역으로 메모리가 부족할 경우 마치 메모리처럼 사용하는 공간이다.

## LRU(Least Recently Used)

- 한 프로세스에서 사용되는 각 페이지마다 카운터를 두어 현시점에서 가장 오랫동안 사용되지 않을 페이지를 제거하는 방법이다.
- 오랫동안 참조되지 않았기 떄문에 앞으로도 사용되지 않을 것이라는 가정에 근거한 방법이다.

## LFU(LeastFrequently Used)

- 가장 사용 횟수가 적은 페이지를 교체하는 알고리즘이다.

## NUR(Not Used Recently)

- 최근에 사용하지 않은 페이지를 교체하는 알고리즘이다.

## FIFO(First In First Out)

- 가장 먼저 적재한 페이지부터 교체하는 알고리즘이다.

## 유닉스 파일시스템 구성

### 부트 블록(Boot block)

- 운영체제를 부팅하거나 초기화하기 위한 부트스트랩 코드를 담고 있는 블록이다.

### 슈퍼 블록(Super block)

- 해당 파일시스템을 관리하기 위한 정보를 담고있는 블록이다.

### 아이노드(inode)

- 해당 파일시스템의 파일들에 대한 속성 정보를 담고 있는 아이노드 구조체 리스트이다.

#### 아이노드가 가지고 있는 속성정보

|     속성     |                                    설명                                     |
| :----------: | :-------------------------------------------------------------------------: |
| inode number |           파일시스템 내에서 해당 파일을 식별하기 위한 고유 식별자           |
|  파일 타입   |                 일반파일, 디렉터리, 장치파일 등의 파일 유형                 |
|   접근권한   |                            파일에 대한 접근권한                             |
| 링크 카운트  |               해당 inode를 참조하는 링크 개수(하드 링크 개수)               |
|    소유자    |                             파일의 소유자(UID)                              |
|   소유그룹   |                            파일의 소유그룹(GID)                             |
|   파일크기   |                                 파일의 크기                                 |
|   MAC Time   | 1. last Modification Time <br> 2. last Access Time <br> 3. last Change Time |
| Block index  |               Data blocks에 저장된 파일 내용에 대한 색인 정보               |

### 데이터 블록(data blocks)

- 실제 파일의 내용이 저장되는 블록이다.

## UNIX/Linux 시스템의 디렉터리 구조

|   디렉터리   |                      내용                      |
| :----------: | :--------------------------------------------: |
|      /       |        root 디렉터리나 최상위 디렉터리         |
|     /etc     |      시스템 설정 파일이 저장되는 디렉터리      |
|     /dev     |         특수 파일이 저장되는 디렉터리          |
|   /usr/bin   |    디폴트 사용자 명령어가 저장되는 디렉터리    |
| /usr/include | C언어 라이브러리 헤더 파일이 저장되는 디렉터리 |
|   /usr/lib   |      C언어 라이브러리가 저장되는 디렉터리      |
|  /usr/sbin   |     시스템 관리 명령어가 저장되는 디렉터리     |
|    /home     |     사용자 홈 디렉터리가 저장되는 디렉터리     |
|     /tmp     |         임시 파일이 저장되는 디렉터리          |
|     /var     |        시스템 로그가 저장되는 디렉터리         |

## 저널링

- Ext2 파일시스템에서 사용하는 fsck(file system Check)의 시간이 오래 걸리는 단점을 보완한 파일시스템 복구 기술이다.
- 복구 시간을 단축하기 위해 데이터를 디스크에 쓰기 전 로그에 데이터를 남겨 시스템의 비정상 종료 시에도 로그를 사용하여 fsck보다 빠르고 안정적인 복구 기능을 제공한다.

## 버퍼 오버플로우(Buffer Overflow)

- 메모리의 정해진 영역을 넘치게 해서 임의의 프로그램이나 함수를 실행시키는 시스템 해킹 기법이다.

### 스택 버퍼 오버플로우(Stack Buffer Overflow)

- 스택은 함수 처리를 위한 지역변수 및 매개변수가 위치하는 메모리 영역을 말한다.
- 스택에 할당된 변수를 오버플로우시켜 스택이 복귀주소 영역을 변조시키면 공격자가 임의의 코드를 실행시킬 수 있다.

#### 스택 버퍼 오버플로우 대책

- 운영체제의 커널 패치
- 함수로부터 복귀하기 전 스택의 무결성 검사
- 스택에서의 쓰기 권한 제한
- 스택에서의 프로그램 실행 금지
- 가능성이 있는 SUID 프로그램 제한

### 힙 버퍼 오버플로우(Heap Buffer Overflow)

- 프로그래머가 필요시 할당하고 해제할 수 있는 동적 메모리 영역을 말한다.
- 힙은 대부분 연결 리스트 형태로 관리되므로 스택과 달리 모든 버퍼가 연속된 메모리 공간에 할당되는 것이 아니다.
  - 즉, 변수의 기능이나 주소를 쉽게 예측하기 어려워 상대적으로 버퍼 오버플로우 빈도가 낮다.

## ASLR(Address Space Layout Randomization)

- 메모리 해킹 공격을 방어하기 위해 `프로세스의 주소 공간을 랜덤하게 배치`하는 기법이다.
- 실행 시마다 메모리 주소를 변경시켜 악성코드에 의한 특정주소 호출을 방지할 수 있다.

## 레이스 컨디션(Race Condition)

- 두 프로세스 간 공유자원을 사용하기 위해 경쟁하는 것을 이용한 공격
- 시스템 프로그램과 공격 프로그램이 경쟁 상태에 이르게 하여 시스템 프로그램이 갖는 권한으로 파일 접근을 가능하게 하는 기법이다.

## 포맷 스트링 공격(format string attack)

- 포맷 스트링(서식 문자열)을 인자로 하는 함수( ex) printf() )의 취약점을 이용한 공격이다.
  - 외부로부터 입력된 포맷 스트링 인자를 검증 없이 그대로 사용하는 경우 발생할 수 있다.

### 포맷 스트링 취약점의 보안 위협 3가지

1. 프로세스 공격(종료/다운)
2. 프로세스의 메모리 읽기(확인)
3. 프로세스의 메모리 쓰기(변조)를 악용한 임의코드 실행

### 보안상 취약한 스트링 관련 취약한 함수

| 취약한 함수 | 안전한 함수 |                용도                 |
| :---------: | :---------: | :---------------------------------: |
|  strcat()   | strcat_s()  |          2개의 문자열 연결          |
|  strncat()  | strncat_s() | 2개의 문자열을 지정한 개수만큼 연결 |
|  strcpy()   | strcpy_s()  |             문자열 복사             |
|  strncpy()  | strncpy_s() |    문자열을지정한 개수만큼 복사     |
|  sprintf()  | sprintf_s() |       문자열을 입력받는 함수        |
|   scanf()   |  scanf_s()  |       데이터를 입력받는 함수        |

## 유닉스 링크 명령어

- ln(Link)명령
- -s 옵션을 사용하면 심볼링 링크로 만들고 -s 옵션을 사용하지 않으면 하드 링크로 만든다.

## 유닉스에서 패스워드 파일

root : x : 0 : 0 : super-user : /root : /user/bin/bash

- root = 사용자 계정명
- x = 패스워드
- 0 = 사용자 ID
- 0 = 사용자 기본그룹 ID
- super-user = 설명
- /root = 홈 디렉터리
- /user/bin/bash = 로그인쉘

## shadow 파일에 저장되는 암호화된 패스워드 필드의 의미

- $ID = 암호회에 적용된 일방향 해시 알고리즘 식별 ID
- $Salt = 패스워드 암호화 강도를 높이기 위한 랜덤 값
- $Encrypted_password = 사용자 패스워드에 salt를 조합한 후 일방향 해시 알고리즘을 이용하여 암호화한 해시값(암호화된 패스워드)

## shadow 파일

- 일반적으로 /etc/passwd 파일의 두 번째 필드에 있는 암호화된 패스워드는 모두 "x"로 표시되어 있다.
  - 실제 암호화된 패스워드는 `/etc/shadow` 파일의 두 번째 필드에 저장된다.
- `passwd 파일은 일반 사용자들도 접근이 가능`하지만 `shadow 파일은 root만 접근`할 수 있다.

## salt

- 사용자 패스워드에 `사용자별로 서로 다른 랜덤값을 조합하여 일방향 해시 암호화한 해시값을 저장`한다.
  - `동일한 패스워드를 사용하는 사용자라도 서로 다른 해시값으로 저장`된다.
- 레인보우 테이블 패스워드 크래킹 공격에 효과적으로 대응할 수 있다.
  - 레인보우 테이블 공격을 통해 해시값의 평문 패스워드를 알아낸다고 해도 알아낸 패스워드는 salt와 조합된 패스워드 해시값에 대한 평문 패스워드이다.
    - 즉, 알아낸 평문 패스워드는 실제 패스워드가 아니다.

## chmod 명령어

- `기존 파일의 접근권한을 변경`할 때 사용한다.
- 이때 `8진수로 지정하는 접근권한은 해당 파일이 가져야 할 권한을 명시`한다.

## umask 명령어

- `새롭게 만들어질 파일의 권한을 설정`하기 위한 명령이다.
- 명령시 지정한 `8진수는 새로 만들어질 파일의 기본 접근권한에서 제거할 권한을 명시`한다.
- `파일 생성 시 기본 접근권한 666에서 umask 권한을 제거`한다.
- `디렉터리 생성 시 기본 접근권한 777에서 umask 권한을 제거`한다.
- 관리자는 /etc/profile 파일에 umask를 지정하여 전체 계정에 동일한 umask 값을 적용할 수 있다.

## 특수권한 설정 방법(SUID, SGID, Sticky bit)

- SUID 설정
  - `chmod u+s 파일명` 또는 `chomd 4777 파일명`
  - SUID가 설정되면 `user의 접근권한 중 실행권한이 s`로 설정된다.
- SGID 설정
  - `chmod g+s 파일명` 또는 `chomd 2777 파일명`
  - SGID가 설정되면 `group의 접근권한 중 실행권한이 s`로 설정된다.
- Sticky bit
  - 디렉터리에서 파일의 소유자만이 해당 파일을 삭제하거나 이름 변경을 할 수 있게 설정하는 특수 권한이다.
  - Sticky bit가 설정되면 other의 접근권한 중 `실행권한이 t`로 설정된다.

### 특수권한 파일 검색 방법

|     구분      |    특수권한 파일 검색     |
| :-----------: | :-----------------------: |
|    SUID(4)    | find / -perm -4000 -print |
|    SGID(2)    | find / -perm -2000 -print |
| Sticky-bit(1) | find / -perm -1000 -print |

## chown 명령어

- 파일이나 디렉터리의 `소유주를 변경`할 때 사용한다.

## chgrp 명령어

- 파일이나 디렉터리의 `그룹을 변경`할 때 사용한다.

## PAM(Pluggable Authentication Module)

- `인증 모듈을 별도로 개발하지 않고 플러그인 방식의 공유 라이브러리를 사용`하여 응용 프로그램이 어떤 방법으로 사용자를 인증할 것인지 설정할 수 있다.
  - 인증(Authentication)을 위해 제공되는 다양한 인증 라이브러리를 말한다.
- 필요에 따라 관리자에 의해 인증체계를 선택적으로 가져갈 수 있으므로 중앙통제가 가능하다.

## /etc/inetd.conf 파일

- 리눅스 시스템에서 슈퍼 데몬을 통해 제공되는 서비스의 설정을 변경할 수 있는 파일이다.

## /etc/services 파일

- 서비스와 이에 대응하는 포트 번호를 갖고 있는 파일이다.
- 인터넷상에서 사용하는 다양한 서비스에 대한 포트, 프로토콜 정보를 정의해 놓은 파일이다.

## /etc/protocols 파일

- 인터넷상에서 사용하는 다양한 프로톨콜과 프로토콜 식별 번호를 정의해 놓은 파일이다.

## TCP Wrapper

- 네트워크 서비스에 관련한 트래픽을 제어하고 모니터링할 수 있는 UNIX 기반의 방화벽 도구이다.
  - 클라이언트의 IP 주소를 확인하여 `시스템 관리자가 접근을 허용한 호스트에 대해서만 서비스를 허용`하기 때문에 외부의 해킹으로부터 시스템을 보호할 수 있다.

### hosts.allow 파일

- `서비스와 접근을 허용`할 호스트 정보(IP 정보)를 담고 있는 정책 파일

### hosts.deny 파일

- `서비스와 접근을 거부`할 호스트 정보(IP 정보)를 담고 있는 정책 파일

### TCP Wrapper를 사용하기 전과 후의 /etc/inetd.conf 설정

|  구분   | 서비스 | 소켓타입 | 프로토콜 | 플래그 | 사용자 |        실행경로        |  실행인수  |
| :-----: | :----: | :------: | :------: | :----: | :----: | :--------------------: | :--------: |
| 사용 전 | Telnet |  stream  |   TCP    | nowait |  root  | `/usr/sbin/in.telnetd` | in.telnetd |
| 사용 후 | Telnet |  stream  |   TCP    | nowait |  root  |    `/usr/sbin/tcpd`    | in.telnetd |

## iptables

- 리눅스 커널 방화벽이 제공하는 테이블들과 그것을 저장하는 체인, 규칙들을 구성할 수 있게 해주는 도구이다.
- `규칙(룰) 기반의 다양한 패킷 필터링 기능`을 제공한다.

## utmp 로그 파일

- 시스템에 `현재 로그인한 사용자들에 대한 상태`를 기록한다.
  - 현재 로그인한 사용자의 계정, 터미널 타입, 원격 호스트 주소, 로그인한 시간 등
- `"who" 명령어`로 그 내용을 볼 수 있다.
  - `"w", "user", "whodo", "finger"` 등의 명령어로도 확인할 수 있다.
- w 명령어의 주요 결과 필드
  - USER : 현재 로그인한 계정
  - TTY : 터미널 장치명, `tty는 콘솔 접속`을 의미하며, `pts는 원격 터미널 접속`을 의미한다.
  - FROM : 원격 호스트 주소
  - LOGIN@ : 로그인한 시간
  - IDLE : 아무 입력도 수행하지 않은 idle 시간
  - WHAT : 현재 수행하는 작업

## wtmp 로그 파일

- 사용자가 `로그인 또는 로그아웃`할 때마다 그 정보가 기록된다.
  - 사용자의 성공한 로그인/로그아웃 시간, 시스템의 Boot/Shutdown 시간 등
- `"last" 명령어`로 그 내용을 볼 수 있다.

## acct/pacct 로그 파일

- 사용자들에 의해 `실행된 모든 명령`이 기록된다.
- `"lastcomm" 명령어`로 그 내용을 볼 수 있다.
  - `"acctom" 명령어`로도 내용을 확인할 수 있다.

## lastlog 로그 파일

- `가장 최근에(마지막) 성공한 로그인 시간` 등의 정보를 저장하고 있는 로그파일이다.

## Unix(SunOS) 관련 로그 파일

|     로그파일      |                                                                                     설명                                                                                      |
| :---------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| /var/adm/lastlog  |                                            - 사용자들의 가장 최근에 로그인한 기록을 담고있는 파일로, 'lastlog' 명령어로 확인한다.                                             |
|  /var/adm/sulog   |                             'su'명령을 사용한 결과를 저장한 파일이다. 리눅스의 경우 /var/log/secure 로그파일에 'su' 명령을 사용한 결과가 남는다.                              |
| /var/adm/loginlog | 5번 이상 실패한 로그인 시도에 대한 기록이다. Linux 계열의 경우 /var/log/btmp 로그파일에 실패한 로그인 시도에 대한 기록을 남기며, 'lastb'명령을 통해 그 내용을 확인할 수 있다. |

## Linux 관련 로그 파일

|     로그파일      | 설명                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| :---------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| /var/log/lastlog  | - 사용자들의 가장 최근에 로그인한 기록을 담고있는 로그파일이다.<br>- `lastlog` 명령을 통해 모든 계정의 최근 접속 기록을 확인한다.<br>- `lastlog -u 계정명` 명령을 통해 해당 계정의 최근 접속 기록을 확인한다.<br>- `lastlog -t 일수` 명령을 통해 일수 이내의 접속한 기록을 확인한다.                                                                                                                                                        |
|   /var/log/wtmp   | - 사용자의 성공한 로그인/로그아웃 정보, 시스템의 Boot/Shutdown 정보에 대한 히스토리를 담고 있는 로그파일<br>- `last` 명령을 통해 모든 계정의 로그인/로그아웃 기록을 확인한다.<br>- `last 계정명` 명령을통해 해당 계정의 로그인/로그아웃 기록을 확인한다.                                                                                                                                                                                    |
|   /var/log/btmp   | - 실패한 로그인 시도에 대한 기록을 담고 있는 로그파일이다.<br>- `lastb` 명령을 통해 모든 계정의 실패한 로그인 기록을 확인한다.<br>- `lastb 계정명` 명령을 통해 해당 계정의 실패한 로그인 기록을 확인한다.                                                                                                                                                                                                                                   |
| /var/log/xferlog  | - FTP 로그파일로 proftpd, vsftpd등, FTP 데몬의 서비스 내역을 기록한다.<br>- FTP로 로그인하는 사용자에 대한 내역, 파일을 업로드/다운로드한 내역을 기록한다.                                                                                                                                                                                                                                                                                  |
|  var/log/message  | - 리눅스 시스템의 가장 기본적인 시스템 로그파일로 시스템 운영에 대한 전반적인 메시지를 저장하고 있다.<br>- 주로 시스템 데몬의 다양한 `실행 상태, 원격 접속정보` 등을 기록한다.                                                                                                                                                                                                                                                              |
|  /var/log/secure  | - 주로 `사용자 및 그룹 생성/삭제, 로컬 및 원격 로그인 등의 사용자인증에 대한 정보를 기록`하고 있는 로그파일로 서버 보안에 아주 민감하고 중요한 정보를 저장하고 있다.<br>- TCP Wrapper의 접근통제와 관련하여 언제, 누가, 어디에서, 어떻게 접속했는가에 대한 로그를 기록하고 있다.<br>- 시스템의 `불법 침입 등이 있었다고 의심이 될 때는 반드시 이 로그파일을 확인`해야 한다.<br>- PAM 모듈의 인증 결과 및 'su' 명령 수행 결과 등을 기록한다. |
| /var/log/boot.log | - 리눅스가 부팅될 때 파일시스템에 대한 체크와 서비스 데몬들의 실행 상태를 기록하고 있는 로그파일이다.<br>- 성공/실패 여부를 확인할 수 있다.                                                                                                                                                                                                                                                                                                 |

## cat /etc/passwd

- 리눅스/유닉스 계열 파일 중 미사용 또는 의심스러운 계정 존재 여부 확인(경로 및 파일명)

## /var/adm/loginlog

- `유닉스 계열` 로그파일 중 `실패한 로그인 `기록 점검을 통해 미사용 및 의심스러운 계정 확인

## /var/log/btmp

- `리눅스 계열` 로그파일 중 `실패한 로그인 `기록 점검을 통해 미사용 및 의심스러운 계정 확인

## xferlog

- xferlog는 `FTP 로그파일`로 proftpd, vsftpd 등 FTP 데몬들의 서비스 내역을 기록한다.

## syslogd

- `리눅스 시스템의 기본적인 로그 파일들은 syslogd에 의해 제어`된다.
  - 즉, 리눅스에서 시스템 로그, 보안 로그, 메일 로그, 부팅 로그 등 시스템의 다양한 로그들을 생성/저장하기 위해선 syslogd 프로세스를 실행해야 한다.
  - 기본적으로 로그파일은 종류별로 /var/log 디렉터리에 생성된다.
- syslogd의 설정 파일인 syslog.conf를 수정함으로써 로그 파일들의 저장 위치와 파일명, 로그 레벨 등의 변경이 가능하다.

## syslog.conf 설정 형식

facility.priority; facility.priority; $\cdot$ $\cdot$ $\cdot$ action(logfile-location)

- facility(A)
  - 로그를 남길 요소/서비스이다.
  - \*는 모든 요소, 서비스를 의미한다.
- priority(B)
  - 로그 수준으로 지정한 수준 이상의 상황이 발생했을 때 로그를 남긴다.
- action(C)
  - 로그 위치를 지정한다.
  - 로그 파일명을 지정하거나 콘솔 또는 원격 로그 서버를 지정할 수 있다.

## syslog.conf 로그 수준 유형

|         Priority(단축형태)         |                                                            설명                                                             |
| :--------------------------------: | :-------------------------------------------------------------------------------------------------------------------------: |
|          Emergency(emerg)          |                                - 시스템이 전면 중단되는 패닉 상태, 전체 공지가 필요하다.<br>                                |
|        - system is unusable        |
|            alert(alert)            |                                           - 즉각적인 조치가 필요한 상황이다.<br>                                            |
| - action must be taken Immediately |
|           Critical(crit)           |                                     - 하드웨어 등의 심각한 오류가 발생한 상황이다.<br>                                      |
|        - critical condition        |
|             Error(err)             |                                         - 일반적인 에러/오류가 발생한 상황이다.<br>                                         |
|         - error condition          |
|          Warning(warning)          |                                             - 경고 상황<br>- warning condition                                              |
|           Notice(notice)           | - 에러/오류는 아니지만, 의미 있는 이벤트가 발생하여 관리자의 조치가 필요한 상황이다.<br>- normal, but significant condition |
|         Information(info)          |                                           - 정보 메시지<br>- information message                                            |
|            debug(debug)            |                                         - 디버깅용 메시지<br>- debug-level message                                          |

## Beep

- the Blocks Extensible Exchange Protocol
- `비동기적인 연결을 위한 응용 프로그램 프로토콜 프레임워크로 내부적으로 인증, 프라이버시, 재전송을 통한 신뢰성 등을 보장`하고 있으므로 좀 더 안전하고 신뢰성 있는 syslog 메시지 전달이 가능하다.

## syslog 프로토콜

- 분산 시스템 및 프로세스의 `로그를 중앙 수집기로 보내 로깅과 분석을 수행하기 위한 UDP 기반의 인터넷 표준 프로토콜`

## logrotate

- 로그 파일들을 관리할 수 있으며, 이들 로그 파일들은 적당한 크기로 보관, 삭제, 압축, 메일 보내기 등의 작업을 수행할 수 있다.

  - 로그파일을 순환시킨다.
  - 로그파일을 압축해서 보관한다.
  - 지정한 용량만큼 찼을 때 다른 파일로 순환시킨다.
  - 작업 시 에러가 발생했으 때 지정한 주소로 메일을 보낸다.

- logrotate.conf
  - logrotate의 설정 파일이다.
- /etc/logrotate.d
  - logrotate를 적용할 프로세스(데몬)의 개별 설정 파일이 위치한 디렉터리이다.
- cron
  - 주기적으로 logrotate를 실행하기 위해 사용한다.

## logrotate의 옵션

- daily, weekly, monthly, yearly
  - 매일, 매주, 매월, 매년 단위로 로그파일 순환
- rotate [개수]
  - 개수만큼 로그 순환 파일을 사용
- compress, nocompress
  - 로그파일을 압축하여, 압축 없이 보관
- missingok
  - 로그파일이 없어도 오류를 발생시키지 않는다.
- notifempty
  - 'not if empty'의 의미로 로그파일이 비어있는 경우 순환하지 않는다.
- sharedscripts
  - 로그파일이 여러 개 있어도 스크립트를 공유하여 prerotate, postrotate 스크립트를 한 번만 실행
- postrotate/endscript
  - 순환 후 스크립트 파일 실행

log rotate 예제

```
/etc/logrotate.d# cat httpd
/var/log/httpd/*log{
  weekly
  rotate 4
  compress
  missingok
  notifempty
  sharedscripts
  postrotate
    스크립트 파일~
  endscript
}
```

## crontab

- cron 데몬을 통해 정기적으로 처리해야 하는 작업 목록을 정의한 파일이다.
  |구분||기술방법|
  |:---:||:---:|:---:|
  |필드|의미||
  |필드1|분|0-59|
  |필드2|시|0-23|
  |필드3|일|1-31|
  |필드4|월|1-12|
  |필드5|요일|0-6(0은 일요일)|
  |필드6|작업|지정 시간에 실행할 작업|

`매일 새벽 3시에 /home 디렉터리에 있는 모든 파일을 백업하기 위한 /root/backup.sh 쉘 스크립트를 실행시킨다.`

- 0 3 \* \* \* /root/backup.sh

## OS별 root 계정에 대한 원격 접속 제한 설정 방법

SunOS

```
#cat /etc/default/login
CONSOLE=/dev/console
```

- /etc/default/login 파일의 CONSOLE 라인을 통해 root의 원격 접속을 제한할 수 있다.
- CONSOLE 라인에 #을 붙이면(주석) 외부에서 root 계정으로 접속할 수 있고 #을 붙이지 않으면 콘솔에서만 접근할 수 있다.

AIX

```
#cat /etc/security/user
rlogin = false
```

- /etc/security/user 파일의 rlogin 설정을 true로 하면 원격에서 root 계정으로 접속할 수 있고, false로 하면 원격에서 접근할 수 없다.

Linux

```
#cat /etc/securetty
CONSOLE
tty1
#pts/1
```

- 리눅스는 로그인 서버에 pam_securetty.so PAM 모듈을 추가한 후(주석 제거) /etc/securetty 파일에 `pts/~` 터미널을 모두 제거(주석)한다.

```
etc/pam.d/login
(수정 전)
#auth required /lib/security/pam_securetty.so
(수정 후)
auth required /lib/security/pam_securetty.so
```

- pts(pseudo-terminal, 가상터미널)는 `Telnet, SSH 등 원격으로 접속하는 가상터미널을 의미하며, 이를 제거 또는 주석 처리하면 root 계정의 pts를 통한 접속을 허용하지 않는다.`

리눅스에서 telnet 접속 시 root 계정 접근 제한을 위한 설정 파일 (pam 모듈 이용)

- securetty

  - telnet의 root 접속을 차단하기 위해선 `pam_securetty.so pam 모듈에서 참조하는 securetty 파일에서 가상터미널을 의미하는 pts/0 ~ pts/x 설정을 제거하거나 주석 처리한다.`

ssh 접속 시 root 계정 접근 제한을 위한 설정 파일

- sshd_config
  - `ssh의 root 접속을 차단하기 위해선 sshd 설정 파일인 sshd_config 파일의 PermitRootLogin 옵션을 no로 설정한다.`

실패한 로그인 시도에 대한 기록을 담고 있는 파일

- btmp

최근 성공한 로그인 기록을 확인하기 위한 last 명령어의 출력 필드

- last 명령의 출력 필드에는 `접속 계정, 터미널 타입, 접속주소, 로그인 시간, 로그아웃 시간`등이 있다.
